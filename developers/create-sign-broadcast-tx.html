<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Create, sign and send a transaction | Commercio.network Documentation</title>
    <meta name="description" content="Documentation for the Commercio.network blockchain.">
    <link rel="icon" href="/icon.png">
    
    <link rel="preload" href="/assets/css/0.styles.d6e0b3ae.css" as="style"><link rel="preload" href="/assets/js/app.398abeb2.js" as="script"><link rel="preload" href="/assets/js/2.f8d0c909.js" as="script"><link rel="preload" href="/assets/js/8.9671858e.js" as="script"><link rel="prefetch" href="/assets/js/10.6d5efbfd.js"><link rel="prefetch" href="/assets/js/11.6e7774ce.js"><link rel="prefetch" href="/assets/js/12.7fe8c807.js"><link rel="prefetch" href="/assets/js/13.e2aac824.js"><link rel="prefetch" href="/assets/js/14.d6c2a2d2.js"><link rel="prefetch" href="/assets/js/15.54ff26f1.js"><link rel="prefetch" href="/assets/js/16.c1d7ea5d.js"><link rel="prefetch" href="/assets/js/17.b81dffd8.js"><link rel="prefetch" href="/assets/js/18.c3c1e8f9.js"><link rel="prefetch" href="/assets/js/19.af371cd0.js"><link rel="prefetch" href="/assets/js/20.c50938f5.js"><link rel="prefetch" href="/assets/js/21.230cddb3.js"><link rel="prefetch" href="/assets/js/22.4918a2a6.js"><link rel="prefetch" href="/assets/js/23.6ab9bcef.js"><link rel="prefetch" href="/assets/js/24.812cf2b3.js"><link rel="prefetch" href="/assets/js/25.2122e1b9.js"><link rel="prefetch" href="/assets/js/26.f1d5dbe6.js"><link rel="prefetch" href="/assets/js/27.b4eae68d.js"><link rel="prefetch" href="/assets/js/28.78484ad8.js"><link rel="prefetch" href="/assets/js/29.0a145a69.js"><link rel="prefetch" href="/assets/js/3.f2d3909e.js"><link rel="prefetch" href="/assets/js/30.f4474c0c.js"><link rel="prefetch" href="/assets/js/31.b423626e.js"><link rel="prefetch" href="/assets/js/32.a4a4bb40.js"><link rel="prefetch" href="/assets/js/33.23f0fa85.js"><link rel="prefetch" href="/assets/js/34.9738f72f.js"><link rel="prefetch" href="/assets/js/35.4453dc36.js"><link rel="prefetch" href="/assets/js/36.ca972545.js"><link rel="prefetch" href="/assets/js/37.feed9f4b.js"><link rel="prefetch" href="/assets/js/38.719036ee.js"><link rel="prefetch" href="/assets/js/39.e64b4f09.js"><link rel="prefetch" href="/assets/js/4.e7a08a60.js"><link rel="prefetch" href="/assets/js/40.d6f4658b.js"><link rel="prefetch" href="/assets/js/41.62da7353.js"><link rel="prefetch" href="/assets/js/42.59d6b16e.js"><link rel="prefetch" href="/assets/js/43.8ca61555.js"><link rel="prefetch" href="/assets/js/44.563300b5.js"><link rel="prefetch" href="/assets/js/45.4c04e15f.js"><link rel="prefetch" href="/assets/js/46.f4ad8e22.js"><link rel="prefetch" href="/assets/js/47.f8d45f19.js"><link rel="prefetch" href="/assets/js/48.c0c6423b.js"><link rel="prefetch" href="/assets/js/49.4664350a.js"><link rel="prefetch" href="/assets/js/5.30df4a69.js"><link rel="prefetch" href="/assets/js/50.3e411d18.js"><link rel="prefetch" href="/assets/js/51.783f9947.js"><link rel="prefetch" href="/assets/js/52.6f4cf75a.js"><link rel="prefetch" href="/assets/js/53.74269e49.js"><link rel="prefetch" href="/assets/js/54.784d7039.js"><link rel="prefetch" href="/assets/js/55.23ea3b86.js"><link rel="prefetch" href="/assets/js/56.5ebcfcd9.js"><link rel="prefetch" href="/assets/js/57.802999d7.js"><link rel="prefetch" href="/assets/js/58.651a8470.js"><link rel="prefetch" href="/assets/js/59.efef2145.js"><link rel="prefetch" href="/assets/js/6.c59ec351.js"><link rel="prefetch" href="/assets/js/60.f9ad66d4.js"><link rel="prefetch" href="/assets/js/61.9db474d6.js"><link rel="prefetch" href="/assets/js/7.d93a4a74.js"><link rel="prefetch" href="/assets/js/9.f48de021.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d6e0b3ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Commercio.network Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://commercio.network" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Commercio.network
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/commercionetwork/commercionetwork" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://commercio.network" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Commercio.network
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/commercionetwork/commercionetwork" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Nodes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/nodes/" class="sidebar-link">Introduction</a></li><li><a href="/nodes/hardware-requirements.html" class="sidebar-link">Hardware requirements</a></li><li><a href="/nodes/full-node-installation.html" class="sidebar-link">Installing a full node</a></li><li><a href="/nodes/validator-node-installation.html" class="sidebar-link">Becoming a validator</a></li><li><a href="/nodes/validator-node-update.html" class="sidebar-link">Updating a validator</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Developers</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/developers/" class="sidebar-link">Introduction</a></li><li><a href="/developers/create-sign-broadcast-tx.html" class="active sidebar-link">Create, sign and send a transaction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developers/create-sign-broadcast-tx.html#_1-message-creation" class="sidebar-link">1. Message creation</a></li><li class="sidebar-sub-header"><a href="/developers/create-sign-broadcast-tx.html#_2-message-signing" class="sidebar-link">2. Message signing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developers/create-sign-broadcast-tx.html#_2-1-data-retrieval" class="sidebar-link">2.1 Data retrieval</a></li><li class="sidebar-sub-header"><a href="/developers/create-sign-broadcast-tx.html#_2-2-signature-data-creation" class="sidebar-link">2.2 Signature data creation</a></li><li class="sidebar-sub-header"><a href="/developers/create-sign-broadcast-tx.html#_2-3-signing-the-data" class="sidebar-link">2.3 Signing the data</a></li><li class="sidebar-sub-header"><a href="/developers/create-sign-broadcast-tx.html#_2-4-signature-object-creation" class="sidebar-link">2.4 Signature object creation</a></li></ul></li><li class="sidebar-sub-header"><a href="/developers/create-sign-broadcast-tx.html#_3-transaction-broadcasting" class="sidebar-link">3. Transaction broadcasting</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developers/create-sign-broadcast-tx.html#_3-1-creating-the-json-object-representation-of-the-transaction" class="sidebar-link">3.1. Creating the JSON object representation of the transaction</a></li><li class="sidebar-sub-header"><a href="/developers/create-sign-broadcast-tx.html#_3-2-broadcasting-the-transaction" class="sidebar-link">3.2 Broadcasting the transaction</a></li></ul></li></ul></li><li><a href="/developers/message-types.html" class="sidebar-link">Supported messages types</a></li><li><a href="/developers/listing-transactions.html" class="sidebar-link">Listing past transactions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Modules</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/x/bank/" class="sidebar-link">Bank</a></li><li><a href="/x/docs/" class="sidebar-link">Docs</a></li><li><a href="/x/government/" class="sidebar-link">Government</a></li><li><a href="/x/id/" class="sidebar-link">Id</a></li><li><a href="/x/memberships/" class="sidebar-link">Memberships</a></li><li><a href="/x/commerciomint/" class="sidebar-link">CommercioMint</a></li><li><a href="/x/pricefeed/" class="sidebar-link">Pricefeed</a></li><li><a href="/x/vbr/" class="sidebar-link">VBR</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="create-sign-and-send-a-transaction"><a href="#create-sign-and-send-a-transaction" class="header-anchor">#</a> Create, sign and send a transaction</h1> <p>This guide has been made due to the lacking documentation about the offline creation, signing and broadcasting of
transactions on a Cosmos.network chain.<br>
All the references about how to perform the actions described below can also be found across the different
Cosmos.network documentation pages, such as (but not limited to):</p> <ul><li><a href="https://cosmos-staging.interblock.io/docs/clients/service-providers.html#cosmos-sdk-transaction-signing" target="_blank" rel="noopener noreferrer">Cosmos SDK transaction signing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://cosmos.network/rpc/#/" target="_blank" rel="noopener noreferrer">Cosmos.network RPC APIs<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://cosmos.network/docs/" target="_blank" rel="noopener noreferrer">Cosmos SDK Documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>Please note that the above links <strong>will not</strong> be kept in sync with the frequent updates that the Cosmos developers
do to their documentation structure. In order to preserve my mental sanity, I will only update this page when
necessary, so please refer to it in order to always know how to create, sign and broadcast transactions.</p> <h2 id="_1-message-creation"><a href="#_1-message-creation" class="header-anchor">#</a> 1. Message creation</h2> <p>A transaction can contain one or multiple messages. While usually a single message is sent per transaction,
none denies of sending multiple messages inside the same transaction. Making it short, a message is a simple JSON
object with some specific fields inside it.
An example of message object is the following.</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commercio/MsgSendDocument&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;sender&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Your address&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;recipient&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Recipient address&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Document UUID&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;content_uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Document content URI&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;metadata&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;content_uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata content URI&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;schema_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Officially recognized schema type&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;schema&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata schema URI&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata schema version&gt;&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;proof&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata validation proof&gt;&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;checksum&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Document content checksum value&gt;&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;algorithm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Checksum algorithm&gt;&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>Fields</strong></p> <table><thead><tr><th style="text-align:left;">Field</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Required</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>type</code></td> <td style="text-align:left;">string</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">Contains the type of the message that is represented inside the object. In order to see all the possible <code>type</code> values, please refer to the <a href="/developers/message-types.html">proper page</a></td></tr> <tr><td style="text-align:left;"><code>value</code></td> <td style="text-align:left;">object</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">Contains the real value of the message. For each message type, a different set of fields will be present inside this object. In order to know which fields should be sent inside this object for each message type, please refer to the <a href="/developers/message-types.html">proper page</a></td></tr></tbody></table> <hr> <h2 id="_2-message-signing"><a href="#_2-message-signing" class="header-anchor">#</a> 2. Message signing</h2> <p>Once created, messages must be signed. In order to do so, the following data will be used.</p> <ol><li>Private key associated to the account.<br>
This can be retrieved from the 12/24 key words using the <a href="https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki" target="_blank" rel="noopener noreferrer">BIP-39<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> specification</li> <li>Address of the signer.<br>
This can be retrieved using the <a href="https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki" target="_blank" rel="noopener noreferrer">BIP-44<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> specification, setting <code>did:com</code> as the human readable part and using the <code>m/44'/118'/0'/0/0</code> derivation path.</li></ol> <h3 id="_2-1-data-retrieval"><a href="#_2-1-data-retrieval" class="header-anchor">#</a> 2.1 Data retrieval</h3> <p>The first thing that must be done in order to sign a message, is to retrieve all the needed data.</p> <h4 id="account-number-and-sequence"><a href="#account-number-and-sequence" class="header-anchor">#</a> Account number and sequence</h4> <p>To avoid repetition attacks, all the transactions that are sent inside a Cosmos blockchain must contain a given <code>account_number</code> and <code>sequence value</code>. Those numbers can be retrieved from the blockchain itself with</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> https://<span class="token operator">&lt;</span>NODE_URL<span class="token operator">&gt;</span>/auth/accounts/<span class="token operator">&lt;</span>SIGNER_ADDRESS<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Supposing we want to read those values for the address <code>did:com:10k2fswy7ce8mvfdlkt2x0mht326svvuwkxqp30</code> from our local node, we will then use</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> http://localhost:1317/auth/accounts/did:com:10k2fswy7ce8mvfdlkt2x0mht326svvuwkxqp30
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This should print a JSON object similar to this:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;height&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1647&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cosmos-sdk/Account&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;did:com:10k2fswy7ce8mvfdlkt2x0mht326svvuwkxqp30&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;coins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;denom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ucommercio&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;9999900000000&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;public_key&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tendermint/PubKeySecp256k1&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A5nUN8qB2iTgQp29lbiZUb6CUoqaxRUNPP3IA9TOKa9J&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;account_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sequence&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>Save the <code>account_number</code> and <code>sequence</code> value in one place, they will be useful later on.</p> <h4 id="chain-id"><a href="#chain-id" class="header-anchor">#</a> Chain id</h4> <p>The next thing we need to create a message signature, is the chain id. This value can be retrieved using the following HTTP endpoit.</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> https://<span class="token operator">&lt;</span>NODE_URL<span class="token operator">&gt;</span>/node_info
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>If we are using a local node, we can use</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> http://localhost:1317/node_info
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This should return a JSON object similar to the following one.</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;protocol_version&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;p2p&quot;</span><span class="token operator">:</span> <span class="token string">&quot;7&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;block&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;app&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;233d4e3a9c68bc724f3deb41197e07052e75ab95&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;listen_addr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tcp://0.0.0.0:26656&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;network&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test-chain-eDSCSs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.30.2&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;channels&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4020212223303800&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;moniker&quot;</span><span class="token operator">:</span> <span class="token string">&quot;testchain&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;other&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;tx_index&quot;</span><span class="token operator">:</span> <span class="token string">&quot;on&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rpc_address&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tcp://0.0.0.0:26657&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Save the <code>network</code> value for later.</p> <h3 id="_2-2-signature-data-creation"><a href="#_2-2-signature-data-creation" class="header-anchor">#</a> 2.2 Signature data creation</h3> <p>In order to create the data that has to be signed, you will need the following values:</p> <ol><li>JSON representation of the message, created inside the <a href="#1-message-creation">message creation section</a></li> <li><code>account_number</code> and <code>sequence</code> values, obtained inside the <a href="#account-number-and-sequence">account number and sequence section</a></li> <li>Id of the chain, obtained inside the <a href="#chain-id">chain id section</a></li></ol> <p>After you've retrieved (or created) all those values, you are ready to start.</p> <p>The signature data is a JSON object formed as follows:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;account_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;ACCOUNT_NUMBER&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;chain_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;CHAIN_ID&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fee&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    FEE_OBJECT
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;memo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;TX_MEMO&gt;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msgs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    MESSAGE_OBJECT
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sequence&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;SEQUENCE&gt;&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Using the same example data of the previous sections, a valid signature data will then look like the following.</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;account_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;chain_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test-chain-eDSCSs&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fee&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;gas&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20000&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;memo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msgs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commercio/MsgSendDocument&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;sender&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Your address&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;recipient&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Recipient address&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Document UUID&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;content_uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Document content URI&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;metadata&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;content_uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata content URI&gt;&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;schema_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Officially recognized schema type&gt;&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;schema&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata schema URI&gt;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata schema version&gt;&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;proof&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata validation proof&gt;&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;checksum&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Document content checksum value&gt;&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;algorithm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Checksum algorithm&gt;&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sequence&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h4 id="important-notes"><a href="#important-notes" class="header-anchor">#</a> Important notes</h4> <h5 id="order-of-the-fields"><a href="#order-of-the-fields" class="header-anchor">#</a> Order of the fields</h5> <p>When serializing them to the JSON format, the fields <strong>must be in alphabetical order</strong>, that means that they should look exactly like the example above.</p> <h5 id="the-fee-object"><a href="#the-fee-object" class="header-anchor">#</a> The fee object</h5> <p>The <code>fee</code> object contains the details of the fee that the transaction creator and signer will pay when broadcasting the transaction to the blockchain. Usually this object's content is set as the default <code>gas</code> value and no <code>amount</code> content, i.e</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;gas&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20000&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-3-signing-the-data"><a href="#_2-3-signing-the-data" class="header-anchor">#</a> 2.3 Signing the data</h3> <p>Once you've create the JSON object containing the data to sign, it is now time to sign them. In order to do so, the following steps should be made:</p> <ol><li><p>Convert the JSON object to it's compact and alphabetically ordered representation.<br>
This means that the keys of the object should be alphabetically sorted, and any white space should be trimmed. The above JSON should then look like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{&quot;account_number&quot;:&quot;0&quot;,&quot;chain_id&quot;:&quot;test-chain-eDSCSs&quot;,&quot;fee&quot;:{&quot;amount&quot;:[],&quot;gas&quot;:&quot;20000&quot;},&quot;memo&quot;:&quot;&quot;,&quot;msgs&quot;:[{&quot;type&quot;:&quot;commercioid/SetIdentity&quot;,&quot;value&quot;:{&quot;ddo_reference&quot;:&quot;hkbmhbmbmbmnbmb&quot;,&quot;did&quot;:&quot;lkh,mjhmjhmj,hmjh&quot;,&quot;owner&quot;:&quot;did:com:13jckgxmj3v8jpqdeq8zxwcyhv7gc3dzmrqqger&quot;}}],&quot;sequence&quot;:&quot;1&quot;}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Compute the SHA-256 hash of the JSON content's byte array representation.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sha256([]byte(compact_json))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Sign the hash bytes with the signer's private key.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sign([]byte(has))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Encode the resulting signature as a Base64 string.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>base64([]byte(signature))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <p>All in one, the operations should be</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let compact_json = compact(json)
let hashed_json = sha256([]byte(compact_json))
let signature_bytes = sign([]byte(hashed_json))
let base64_signature = base64([]byte(signature_bytes))
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-4-signature-object-creation"><a href="#_2-4-signature-object-creation" class="header-anchor">#</a> 2.4 Signature object creation</h3> <p>Once we have the Base64 signature representation, we can finally create the signature object that we will later use during the transaction creation. In order to do so, a JSON object with the following fields should be created:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;pub_key&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;PUB_KEY_TYPE&gt;&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;PUB_KEY_VALUE&gt;&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;signature&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;BASE64_SIGNATURE_VALUE&gt;&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>Fields</strong></p> <table><thead><tr><th style="text-align:left;">Field</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Required</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>type</code></td> <td style="text-align:left;">string</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">Contains the type of the public key associated with the signing key we used before. The supported types are <code>tendermint/PubKeySecp256k1</code> and <code>tendermint/PubKeyEd25519</code></td></tr> <tr><td style="text-align:left;"><code>value</code></td> <td style="text-align:left;">string</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">See <a href="#public-key-encoding">Public key value retrieving</a> for more details</td></tr> <tr><td style="text-align:left;"><code>signature</code></td> <td style="text-align:left;">string</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">Base64 encoded value of the signature, as obtained inside the <a href="#23-signing-the-data">signing the data section</a></td></tr></tbody></table> <h4 id="public-key-encoding"><a href="#public-key-encoding" class="header-anchor">#</a> Public key encoding</h4> <p>In order to properly encode the public key value of the signer, the following steps should be followed.</p> <ol><li><p>Obtain the compressed format of the public key point value.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let compressed = encode(public_key.point, compressed = true)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Encode the compressed value as a Base64 string.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let encoded = Base64(compressed)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <p>All in one, the operations should be</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>let compressed = encode(public_key.point, compress = true)
let base64 = Base64(compressed)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>More on how compressed keys can be obtained is described on the following StackExchange question:<br> <a href="https://bitcoin.stackexchange.com/questions/69315/how-are-compressed-pubkeys-generated/69322" target="_blank" rel="noopener noreferrer">How are compressed PubKeys generated?<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <h2 id="_3-transaction-broadcasting"><a href="#_3-transaction-broadcasting" class="header-anchor">#</a> 3. Transaction broadcasting</h2> <p>The last step to correctly insert a transaction into the blockchain is broadcasting it. In order to do so, we need to create the transaction body and later sending it with an HTTP request to a full node.</p> <h3 id="_3-1-creating-the-json-object-representation-of-the-transaction"><a href="#_3-1-creating-the-json-object-representation-of-the-transaction" class="header-anchor">#</a> 3.1. Creating the JSON object representation of the transaction</h3> <p>The first thing that needs to be done in order to create a transaction, is to create a JSON object formed as follows.</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> MESSAGE_OBJECT <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fee&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    FEE_OBJECT
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;signatures&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> SIGNATURE_OBJECT <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;memo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>Fields</strong></p> <table><thead><tr><th style="text-align:left;">Field</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Required</th> <th style="text-align:left;">Description</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>msg</code></td> <td style="text-align:left;">array</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">Contains all the messages that have been signed, each one as a JSON object. These objects are the same that has been created inside the <a href="#1-message-creation">message creation section</a></td></tr> <tr><td style="text-align:left;"><code>fee</code></td> <td style="text-align:left;">object</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">Contains the fees that the transaction signer will pay when sending the transaction itself. This is the same object that is put inside the signature data we've seen inside the <a href="#22-signature-data-creation">signature data creation section</a></td></tr> <tr><td style="text-align:left;"><code>signatures</code></td> <td style="text-align:left;">array</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">Contains all the signatures of the messages that will be sent along with the request. The object definition is the one we've seen in the previous <a href="#24-signature-object-creation">signature object creation section</a></td></tr> <tr><td style="text-align:left;"><code>memo</code></td> <td style="text-align:left;">string</td> <td style="text-align:left;">no</td> <td style="text-align:left;">This must contain the same value of the <code>memo</code> field that is present inside the signature data we've seen on the previous <a href="#24-signature-object-creation">signature object creation section</a></td></tr></tbody></table> <h4 id="example"><a href="#example" class="header-anchor">#</a> Example</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commercio/MsgSendDocument&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;sender&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Your address&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;recipient&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Recipient address&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Document UUID&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;content_uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Document content URI&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;metadata&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;content_uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata content URI&gt;&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;schema_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Officially recognized schema type&gt;&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;schema&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata schema URI&gt;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata schema version&gt;&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;proof&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata validation proof&gt;&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;checksum&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Document content checksum value&gt;&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;algorithm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Checksum algorithm&gt;&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fee&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;gas&quot;</span><span class="token operator">:</span> <span class="token string">&quot;200000&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;signatures&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;pub_key&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tendermint/PubKeySecp256k1&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AnFSuINPl9229iZdH9z2C9vVi7acnM7mM02Z9AEtsvnj&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;signature&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DTcJz2V0JxpcdtAlg/pavyB/k+0RnbgulMjIGHtl3g4LwHrG7vnZ6eYll6FkVRkjSB2VSNrLdYiWbriB1Y8KTQ==&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;memo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="_3-2-broadcasting-the-transaction"><a href="#_3-2-broadcasting-the-transaction" class="header-anchor">#</a> 3.2 Broadcasting the transaction</h3> <p>Once the transaction JSON has been created, we can now broadcast it sending it to a full node. In order to do so, a POST HTTP request should be made.</p> <h4 id="_3-2-1-creating-the-request-body"><a href="#_3-2-1-creating-the-request-body" class="header-anchor">#</a> 3.2.1 Creating the request body</h4> <p>The request body must be a JSON object formed as follows:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span> 
  <span class="token property">&quot;tx&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    &lt;TX_BODY&gt;
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;block/sync/async&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>Fields</strong></p> <table><thead><tr><th style="text-align:left;">Field</th> <th style="text-align:left;">Type</th> <th style="text-align:left;">Required</th> <th style="text-align:left;">Descrizione</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>tx</code></td> <td style="text-align:left;">object</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">Contains the data of the transaction that has been created inside the <a href="#31-creating-the-json-object-representation-of-the-transaction">section 3.1</a></td></tr> <tr><td style="text-align:left;"><code>mode</code></td> <td style="text-align:left;">string</td> <td style="text-align:left;">yes</td> <td style="text-align:left;">Tells when the node should return the answer. The <code>async</code> one tells the node to return immediately, <code>sync</code> tells to return after the transaction has been validated, while <code>block</code> waits till the transaction has been successfully broadcasted and returns the information of the block containing it.</td></tr></tbody></table> <h4 id="_3-2-2-performing-the-request"><a href="#_3-2-2-performing-the-request" class="header-anchor">#</a> 3.2.2 Performing the request</h4> <p>Once the JSON body has been created, the request can be made. The endpoint is the following:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>curl -X POST https://&lt;NODE_URL&gt;/txs -d @&lt;JSON_BODY_FILE&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Where <code>&lt;JSON_BODY_FILE&gt;</code> represents the path to the file containing the request body.</p> <p>If we are running a local node, it should then be</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>curl -X POST http://localhost:1317/txs -d @~/request_body.json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="example-request-body"><a href="#example-request-body" class="header-anchor">#</a> Example request body</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tx&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;account_number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;chain_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test-chain-eDSCSs&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;fee&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token property">&quot;gas&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20000&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;memo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;msgs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commercio/MsgSendDocument&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;sender&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Your address&gt;&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;recipient&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Recipient address&gt;&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Document UUID&gt;&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;content_uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Document content URI&gt;&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;metadata&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;content_uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata content URI&gt;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;schema_type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Officially recognized schema type&gt;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;schema&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                  <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata schema URI&gt;&quot;</span><span class="token punctuation">,</span>
                  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata schema version&gt;&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;proof&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Metadata validation proof&gt;&quot;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token property">&quot;checksum&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Document content checksum value&gt;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;algorithm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;Checksum algorithm&gt;&quot;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;sequence&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;fee&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;gas&quot;</span><span class="token operator">:</span> <span class="token string">&quot;200000&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;signatures&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;pub_key&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tendermint/PubKeySecp256k1&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;AnFSuINPl9229iZdH9z2C9vVi7acnM7mM02Z9AEtsvnj&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;signature&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DTcJz2V0JxpcdtAlg/pavyB/k+0RnbgulMjIGHtl3g4LwHrG7vnZ6eYll6FkVRkjSB2VSNrLdYiWbriB1Y8KTQ==&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;memo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sync&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/commercionetwork/commercionetwork/edit/master/docs/developers/create-sign-broadcast-tx.md" target="_blank" rel="noopener noreferrer">Edit this page on Github</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/6/2019, 1:06:06 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/developers/" class="prev router-link-active">Introduction</a></span> <span class="next"><a href="/developers/message-types.html">Supported messages types</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.398abeb2.js" defer></script><script src="/assets/js/2.f8d0c909.js" defer></script><script src="/assets/js/8.9671858e.js" defer></script>
  </body>
</html>
